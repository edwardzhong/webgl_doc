## 线性代数

### 向量

向量是有大小和方向的有向线段

向量的大小就是向量的长度 (模)

向量的方向描述了空间中向量的指向

1. 向量的模, 即向量的长度

   $ |v|= \sqrt{a^2+b^2}$

   $    |v|= \sqrt{a^2+b^2+c^2}$

   

2. 向量乘以标量或者除以标量,相当于以因子 k 来缩放向量的长度

   $ax'=ax\times k$ 

   $by'=by \times k$
   
   

3. 向量之间的加减法引导出了三角形法则,即将向量的首尾相连就会得到加法的结果

   $c x=ax ± bx$ 

   $cy=by ± by$
   
   

4. 两点的距离: 在3D中,已知两点a,b,求两点之间的距离d？我们可以将a,b两点看做向量,然后b-a就是向量d,然后我们再计算向量d的模就是两点间的距离

   $|d|= \sqrt{(bx-ax)^2+(by-ay)^2}$

   $|d|= \sqrt{(bx-ax)^2+(by-ay)^2+(bz-az)^2}$



5. 向量的点积,向量的点乘描述的是两个向量之间的夹角Ø的大小,即余弦值，可以从余弦函数图像推出性质

   $\vec{a}\cdot \vec{b} = ax \times bx + ay \times by$ 

   $\vec{a}\cdot \vec{b} = ax \times bx + ay\times by + az\times bz$

   $\vec{a}\cdot \vec{b} =|\vec{a}||\vec{b}|\times cosØ$

   * \> 0 表示小于90°
   * = 0 表示等于90°
   * < 0 表示大于90°



6. 向量的叉积，两个向量叉乘只在3D空间中有意义，因为叉乘的结果向量的方向与两个相乘向量都是垂直的。在2D空间里，无法找到一个能与两条相交的直线都垂直的直线，但在3D空间中易如反掌！在3D图形学中主要应用在计算三角形等表面的法向量

   于二维向量来说，叉积的定义是：

   a⃗ ×b⃗ =(a1,a2)×(b1,b2)=a1b2−a2b1

   $\vec{a} \times \vec{b} = (ay \times bz  –  az \times by , az \times bx – ax \times bz , ax \times by – ay \times bx)$

   $\vec{a} \times \vec{b} = |\vec{a}||\vec{b}|\times sinØ$

   * w 是两个向量之间最小的夹角

   * w 与 a，b 垂直

   * w，a，b 符合右手定则

     

7. 向量加减法和数乘的性质

   向量加法和数乘称为是向量的线性运算,它满足下列运算规则(设a⃗ ,b⃗ ,c⃗ 都是n维向量向量)：

    1. 交换律：              a⃗ +b⃗ =b⃗ +a⃗ 

    2. 结合律：              (a⃗ +b⃗ )+c⃗ =a⃗ +(b⃗ +c⃗ )

    3. 有零元：              a⃗ +0⃗ =a⃗ 

    4. 有负元：              a⃗ +(−a⃗ )=0⃗ 

    5. 1a⃗ =a⃗ 

    6. λ(μa⃗ )=(λμ)a⃗ =μ(λ)a⃗ 

    7. λ(a⃗ +b⃗ )=λa⃗ +λb⃗ 

    8. (λ+μ)a⃗ =λa⃗ +μa⃗ 

   

### 齐次坐标

在3D世界中表示一个点的方式是 (x, y, z)，在3D世界中表示一个向量的方式也是 (x, y, z)
为了区分点和向量我们给它加上一维，即 ( x, y, z, w) ，这种用 n+1 维坐标表示 n 维坐标的方式称为齐次坐标。
引入齐次坐标的重要原因是可以使用 4 x 4 矩阵对点和向量进行变换

(x, y, z, 0 ) 等 w = 0 表示一个向量;

(x, y, z, 1) , (x', y', z', 2) 等 w ≠ 0  表示点



### 矩阵  

向量是标量的数组,矩阵是向量的数组

1. 2 x 2矩阵, 由向量 [ax,ay] [bx,by] 组成
  |ax bx| 
  |ay by| 
       

  3 x 3矩阵, 由向量[ax,ay,az] [bx,by,bz] [cx,cy,cz]组成
  |ax  bx  cx| 
  |ay  by  cy| 
  |az  bz  cz| 
       
  
2. 矩阵与标量相乘

   标量k和矩阵M相乘会得到一个和原矩阵维数相同的矩阵N,矩阵N的每个元素等于矩阵M的每个元素与标量k相乘, 和向量的原理一样, 它代表的意义是缩放矩阵
   |a b| • k = |a•k b•k|
   |c d|          |c•k c•k|

   

4. 矩阵与向量相乘

   因为向量也属于矩阵, 所以必须要满足矩阵相乘规则, 对于行向量而言, 行向量要左乘矩阵, 对列向量而言,列向量要右乘矩阵。

   2D向量 v 乘以矩阵 M 得到的依然是2D向量(3D向量同理),所以我们可以理解矩阵M是对向量v的一种坐标变换。
   
   [x y]  • |a b| = |a•x + b•y|
   			|c d|     |c•x + d•y|
   
    
   
   向量与矩阵相乘，本质就是坐标的转换，即矩阵变换。下面是矩阵对应的函数关系推导,用变换前的向量坐标和变换后的向量坐标代入多项式函数,则可以方向求出 a,b,c,d值
   |a b|•|x| = x•|a| + y•|b| = |ax + by|
   |c d|  |y|        |c|        |d|    |cx + dy|
       
   
4. 矩阵与矩阵相乘

    矩阵A的列数等于矩阵B的行数时，它们才能相乘。矩阵A行数m，列数p (m x p)；矩阵B行数p，列数n (p x n)。则它们相乘会得到一个 m 行 n 列(m x n) 的矩阵。

    [m, p] x [p, n] = [m, n]

    矩阵的顺序很重要 M•N ≠ N•M，换个说法，矩阵相乘不符合交换律。

    矩阵相乘规律：行 x 列

    矩阵与矩阵相乘，本质就是复合矩阵变换。

    

6. 单位矩阵和逆矩阵

  单位矩阵行数等于列数，对角位置=1，其余为0，下面是 4x4的单位矩阵
  $$
  \begin{bmatrix}
  1 & 0 & 0 & 0 \\
  0 & 1 & 0 & 0 \\
  0 & 0 & 1 & 0 \\
  0 & 0 & 0 & 1 
  \end{bmatrix}
  $$
  
  
  矩阵M乘单位矩阵I，结果还是矩阵M，即 
  
  M• I = M
  
  对于任意数x，倒数是 1/x，逆矩阵就是矩阵的"倒数"，矩阵M的逆矩阵是 $M^{-1}$
  
  同理 矩阵M乘以逆矩阵，结果为单位矩阵，只有方阵(行数等于列数) 才有逆矩阵
  
  $M • M^{-1}= M^{-1} • M = I$
  
  
  
  矩阵与向量相乘就是使向量（点）运动的过程，而矩阵求逆就是**点不动，坐标系动**。
  
  **你选择的坐标系（基）不同，得出来的向量的表示就不同。向量还是那个向量，选择的坐标系不同，其表示方式就不同**。“**对坐标系施加变换的方法，就是让表示那个坐标系的矩阵与表示那个变化的矩阵相乘。**”矩阵的乘法变成了运动的施加。只不过，被施加运动的不再是向量，而是另一个坐标系
  
    
  
7. 转置矩阵
  
  矩阵M转置后得到的另一个矩阵$M^T$，它的行是M的列，它的列是M的行。3D图形学中矩阵的转置和求逆常用于计算法线的变换。
  
  假如矩阵M为
  
  |0   4    8   12| 
  |1   5    9   13| 
  |2   6   10  14|
  |3   7   11  15| 
  
  那么M的转置矩阵 $M^T$  为
  
  |0     1     2     3| 
  |4     5     6     7| 
  |8     9    10  11|
  |12  13  14   15| 
  
  
  
7. 矩阵变换

    矩阵变换以顶点或向量为运算对象，即上面的矩阵与标量，矩阵与向量的乘法。
    顶点或向量(x,y) 在坐标空间转换后到达新的位置 (x',y') , 中间转换因子就是 <变换矩阵>

    (x , y) • <变换矩阵> = (x' , y')

    

    3D图形中，点或向量的线性变换使用3x3矩阵表示，但它不能进行最基本的平移变换，因此再加一维变成 4x4矩阵，也就是齐次坐标，就能完美表示平移
|1   0   0   tx| 
    |0   1   0   ty| 
    |0   0   1   tz|
    |0   0   0   1 | 
    
    
    
    绕z旋转Ø角度的矩阵 (坐标系方向: 向右为+x, 向上为+y)
    |cosØ  -sinØ    0|
    |sinØ   cosØ    0|
    |0         0           1|
        
    
    因此绕z轴旋转90度的矩阵结果是
|0  -1   0|
    |1   0   0|
    |0   0   1|
    
    
    
    复合变换
    
    矩阵复合变换就是上面的矩阵与矩阵的乘法，线性变换保持矢量相加和标量相乘运算不变性，这是复合变换的基础。
    
    f (u) + f (v) = f (u + v)
    k • f (u) = f (k•u)
    
    
    
8. 矩阵变换的几何意义
  
    任意向量都能表示为基向量(1,0) (0,1)的线性组合
    
    线性变换是操作空间的一种手段，它保持网格线平行且等距分布，并且保持原点不动。
    
    矩阵变量乘法就是计算线性变换作用于给定向量的一种途径，矩阵可以理解为对空间的一种特定变换
    
    矩阵变换就是基向量 (1,0) (0,1) 在坐标空间内的缩放、挤压和旋转。变换矩阵就是变换后的基向量的坐标。
    
    
    $$
    \begin{bmatrix}
    1 & 0 \\
    0 & 1 \\
    \end{bmatrix}
    $$
    
    a • v  + b • w 线性组合，线性的理解：固定其中一个标量，让另一个标量自由变化，所产生的向量终点会描出一条直线。
    
    参与组合的一对向量不共线，那么由它们进行线性组合所得到的向量可以达到平面上的任意一个点，如果参与组合的一对向量共线，那么由它们进行线性组合所得到的向量的终点被限制在一条通过原点的直线上，如果参与组合的一对向量都是零向量，那么由它们进行线性组合所得到的向量永远是零向量
    
    v 和 w全部线性组合构成的向量集合，被称为"张成的空间"，对大部分二维向量来说，它们 "张成的空间" 就是整个无限大的平面，但如果共线，它们"张成的空间"就是一条直线
    
    
    
    线性变换的两大特点，经过变换后：
    
    1. 所有的直线还是直线
    
    2. 原点还在原来的位置
    
       
    
    复合变换就是将多个独立变换组合在一起
    
    两个矩阵相乘的几何意义，就是两个线性变换相继作用，乘积需要从右向左读，即先应用右侧矩阵所描述的变换，然后再应用左侧矩阵所描述的变换，
    
    旋转90˚再斜切 :  <旋转斜切矩阵> = <斜切矩阵> • <旋转矩阵>
    
    很明显在空间当中，<旋转90˚再斜切> 与 <斜切 再旋转90˚> ，它们变换后的坐标并不一样。这是矩阵相乘不满足交换律的原因，即左乘结果不等于右乘结果。
    
    
    
    非方阵体现了不同维数之间的变换
    
    
    
    特征值与特征向量
    
    从定义出发，Ax=cx：A为矩阵，c为特征值，x为特征向量。
    
    矩阵A乘以x表示，对向量x进行一次转换（旋转或拉伸）（是一种线性转换），而该转换的效果为常数c乘以向量x（即只进行拉伸）。
    
    我们通常求特征值和特征向量即为求出该矩阵能使哪些向量（当然是特征向量）只发生拉伸，使其发生拉伸的程度如何（特征值大小）。这样做的意义在于，看清一个矩阵在那些方面能产生最大的效果（power），并根据所产生的每个特征向量（一般研究特征值最大的那几个）进行分类讨论与研究。
    
    
    
    
    
9. 矩阵变换与多项式

   变换其实就是函数的另一种叫法，线性变换就是将向量作为输入和输出的一类函数。本质上也是input和output，输入一个vector，经过某个transformation之后，得到一个输出的vector。整个过程，可以看作是输入的vector移动到了输出的vector的位置。

   |x'|    |a  d  g |   |x|
   |y'| = |b  e  h| • |y|
   |z'|    |c   f   i |    |z|

   x' = a•x + d•y + g•z
   y' = b•x + e•y + h•z
   z' = c•x +  f•y + i•z
   
   
   
   线性方程组
   
   A•x = v 的几何意义
   
   > 矩阵A相当于一个线性变换，向量x在经过A线性变换后，得到的向量为v。线性方程组的求解过程其实就是找到向量v在经由A这个线性变换之前的所在位置x。要找到这个解向量，可以像倒带一样，对v向量进行A的逆操作。
   >
   > 因此，我们可以把它变成另一个过程，即将v所在的线性空间，经过另一个逆向的过程，变回x所在的线性空间，那么这个线性变换用矩阵表示，就是A的逆矩阵，用A-1表示。即逆矩阵A-1所代表的线性变换，是A所代表的线性变换的逆过程。因此A-1*A相对于任何事情都没有做。
   >
   > 逆矩阵相当于线性变换的逆操作，因此只有在线性变换后空间的维数不变的情况下，才能进行逆操作。线性变换不降维，前提条件是矩阵的行列式值不为0，因此矩阵的逆矩阵存在的前提，即矩阵的行列式值不为0。
   
   $A\cdot \vec{x} = \vec{v}$
   
   $A \cdot A^{-1} \cdot \vec{x} = A^{-1}\cdot \vec{v}$
   
   $\vec{x} = A^{-1}\cdot \vec{v}$
   
   
   
10. 正交投影, 投影就是意味着降维操作,二维进行降维就变成了一维,三维进行降维就变成了二维。其实用数据来表示就是对应的坐标轴的数值变为了0

  投影到yz平面的矩阵 (x为0,其余坐标保持原来的值)
           |0  0  0|
   M = |0  1  0|
           |0  0  1|

  

   投影到xz平面的矩阵 (y为0,其余坐标保持原来的值)
           |1  0  0|
   M = |0  0  0|
           |0  0  1|

  

   投影到xy平面的矩阵 (z为0,其余坐标保持原来的值)
           |1  0  0|
   M = |0  1  0|
           |0  0  0|



### 弧度和度数的关系

π ≈ 3.14
1˚   = π/180
20˚ =  π/9
30˚ =  π/6
40˚ =  π/4.5
45˚ =  π/4
50˚ =  π/3.6
60˚ =  π/3
70˚ =  π/2.57
80˚ =  π/2.25
90˚ =  π/2
180˚= π 
正切 tan(y/x)
反正切 atan(y/x) 结果为弧度
反正切 atan2(y,x) 结果范围: π ~ -π ,可处理除数和被除数为 0 的情况(90˚和 270˚) 推荐使用